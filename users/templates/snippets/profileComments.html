<script type="text/javascript">
            
  function submitForm(event, blog_id) {
    event.preventDefault(); // Prevent the default form submission

    var form = event.target.form;
    var url = "{% url 'blog:create_comment' 654546565 %}".replace("654546565", blog_id);
    var data = new FormData(form);

    // Perform the AJAX request here
    $.ajax({
      url: url,
      type: "POST",
      data: data,
      processData: false,
      contentType: false,
      success: function(response) {
        form.reset(); // Reset the form
        $("#timeline-comment"+blog_id).prepend(response); // Prepend the response to the comment section
        
      },
      error: function(xhr) {
        console.log(xhr.responseText);
      },
      complete: function() {
        // Additional actions after the AJAX request is complete
        var refresher = document.getElementById('refresher'+blog_id)
        //refresher.click()
        location.reload()
      },
    });
  }

function appendComment(data){
  owner = data['author']
  message = data['message']
  profile_image = data['profile_image']
  timestemp = data['whenpublished']

  createCommentsContainer(owner, message, profile_image, timestemp)

}

function createCommentsContainer(owner, message, profile_image, timestemp){
  // Create the outer div for the comment
  var commentDiv = document.createElement('div');
  commentDiv.classList.add('timeline-comment');

  // Create the inner div for the comment header
  var headerDiv = document.createElement('div');
  headerDiv.classList.add('timeline-comment-header');

  // Create the image element for the author's profile image
  var profileImage = document.createElement('img');
  profileImage.src = profile_image;
  profileImage.alt = 'Image Unavailable';

  // Create the paragraph element for the author's name and publication date
  var authorParagraph = document.createElement('p');
  authorParagraph.textContent = author + ' ';
  
  var smallElement = document.createElement('small');
  smallElement.textContent = whenpublished;

  // Append the small element to the author paragraph
  authorParagraph.appendChild(smallElement);

  // Append the profile image and author paragraph to the header div
  headerDiv.appendChild(profileImage);
  headerDiv.appendChild(authorParagraph);

  // Create the paragraph element for the comment body
  var bodyParagraph = document.createElement('p');
  bodyParagraph.classList.add('timeline-comment-text');
  bodyParagraph.textContent = message;

  // Append the header div and body paragraph to the comment div
  commentDiv.appendChild(headerDiv);
  commentDiv.appendChild(bodyParagraph);

  // Return the generated comment div
  return commentDiv;
}


</script>